<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.14.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Organise AI4SH in-situ data: process_project.notebook_startup Namespace Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<script type="text/javascript" src="../../clipboard.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript" src="../../cookie.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="../../ai4soilhealth_x55.png"/></td>
  <td id="projectalign">
   <div id="projectname">Organise AI4SH in-situ data
   </div>
   <div id="projectbrief">Compile AI4SH in-situ soil observations from spreadsheet CSV data to a json formatted database</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.14.0 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search/",'.html');
</script>
<script type="text/javascript">
$(function() { codefold.init(); });
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('../../',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(function(){initNavTree('d8/d5a/namespaceprocess__project_1_1notebook__startup.html','../../',''); });
</script>
<div id="container">
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="headertitle"><div class="title">process_project.notebook_startup Namespace Reference</div></div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 id="header-func-members" class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a4e38bfa1f4d1e439f452c7ec633756e1" id="r_a4e38bfa1f4d1e439f452c7ec633756e1"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a4e38bfa1f4d1e439f452c7ec633756e1">Notebook_initiate</a> (user_project_file, process_file)</td></tr>
</table>
<a name="details" id="details"></a><h2 id="header-details" class="groupheader">Detailed Description</h2>
<div class="textblock"><pre class="fragment">Created on 21 May 2025
Last undated 7 juni 2025
Updated on 1 Sept 2025 (doxygen comments added)

@author: thomasgumbricht
</pre> </div><a name="doc-func-members" id="doc-func-members"></a><h2 id="header-doc-func-members" class="groupheader">Function Documentation</h2>
<a id="a4e38bfa1f4d1e439f452c7ec633756e1" name="a4e38bfa1f4d1e439f452c7ec633756e1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4e38bfa1f4d1e439f452c7ec633756e1">&#9670;&#160;</a></span>Notebook_initiate()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">process_project.notebook_startup.Notebook_initiate </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>user_project_file</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>process_file</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">@brief Initialize notebook project and process files.

This function sets up the notebook environment by reading user project and process files,
expanding paths, validating file existence, and collecting relevant JSON process files.

@param user_project_file (str): Path to the user project JSON file. May include '~' for home directory.
@param process_file (str): Name of the process file to be used within the project directory.

@return tuple:
    - user_default_params_D (dict): Dictionary of default parameters loaded from the user project file.
    - user_json_process_L (list): List of paths to JSON process files for the project.

@details
- Expands '~' in user_project_file path.
- Reads and prints user project parameters if verbose is enabled.
- Validates existence of project and process files.
- If process file contains a job_folder, reads pilot file to collect all JSON process files.
- Handles missing or invalid files with informative print statements.
</pre> 
<p class="definition">Definition at line <a class="el" href="../../d4/d47/notebook__startup_8py_source.html#l00015">15</a> of file <a class="el" href="../../d4/d47/notebook__startup_8py_source.html">notebook_startup.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   15</span><span class="keyword">def </span>Notebook_initiate(user_project_file, process_file):</div>
<div class="line"><span class="lineno">   16</span>    <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">   17</span><span class="stringliteral">    @brief Initialize notebook project and process files.</span></div>
<div class="line"><span class="lineno">   18</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">   19</span><span class="stringliteral">    This function sets up the notebook environment by reading user project and process files,</span></div>
<div class="line"><span class="lineno">   20</span><span class="stringliteral">    expanding paths, validating file existence, and collecting relevant JSON process files.</span></div>
<div class="line"><span class="lineno">   21</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">   22</span><span class="stringliteral">    @param user_project_file (str): Path to the user project JSON file. May include &#39;~&#39; for home directory.</span></div>
<div class="line"><span class="lineno">   23</span><span class="stringliteral">    @param process_file (str): Name of the process file to be used within the project directory.</span></div>
<div class="line"><span class="lineno">   24</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">   25</span><span class="stringliteral">    @return tuple:</span></div>
<div class="line"><span class="lineno">   26</span><span class="stringliteral">        - user_default_params_D (dict): Dictionary of default parameters loaded from the user project file.</span></div>
<div class="line"><span class="lineno">   27</span><span class="stringliteral">        - user_json_process_L (list): List of paths to JSON process files for the project.</span></div>
<div class="line"><span class="lineno">   28</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">   29</span><span class="stringliteral">    @details</span></div>
<div class="line"><span class="lineno">   30</span><span class="stringliteral">    - Expands &#39;~&#39; in user_project_file path.</span></div>
<div class="line"><span class="lineno">   31</span><span class="stringliteral">    - Reads and prints user project parameters if verbose is enabled.</span></div>
<div class="line"><span class="lineno">   32</span><span class="stringliteral">    - Validates existence of project and process files.</span></div>
<div class="line"><span class="lineno">   33</span><span class="stringliteral">    - If process file contains a job_folder, reads pilot file to collect all JSON process files.</span></div>
<div class="line"><span class="lineno">   34</span><span class="stringliteral">    - Handles missing or invalid files with informative print statements.</span></div>
<div class="line"><span class="lineno">   35</span><span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">   36</span> </div>
<div class="line"><span class="lineno">   37</span>    process_file_FPN = <span class="keywordtype">None</span></div>
<div class="line"><span class="lineno">   38</span> </div>
<div class="line"><span class="lineno">   39</span>    <span class="comment"># Check if user_project_file is a path with &#39;~&#39; and expand it</span></div>
<div class="line"><span class="lineno">   40</span>    <span class="comment"># This is useful for user project files that are stored in the home directory.</span></div>
<div class="line"><span class="lineno">   41</span>    <span class="keywordflow">if</span> user_project_file[0] == <span class="stringliteral">&#39;~&#39;</span>:</div>
<div class="line"><span class="lineno">   42</span> </div>
<div class="line"><span class="lineno">   43</span>        user_project_file = path.expanduser(user_project_file)</div>
<div class="line"><span class="lineno">   44</span> </div>
<div class="line"><span class="lineno">   45</span>    <span class="keywordflow">if</span> <span class="keywordflow">not</span> path.exists(user_project_file):</div>
<div class="line"><span class="lineno">   46</span> </div>
<div class="line"><span class="lineno">   47</span>        print(<span class="stringliteral">&#39;The user project file does not exist:&#39;</span>, user_project_file)</div>
<div class="line"><span class="lineno">   48</span> </div>
<div class="line"><span class="lineno">   49</span>        process_file_FPN = <span class="keywordtype">None</span></div>
<div class="line"><span class="lineno">   50</span>        </div>
<div class="line"><span class="lineno">   51</span>    user_default_params_D = Read_json(user_project_file)</div>
<div class="line"><span class="lineno">   52</span> </div>
<div class="line"><span class="lineno">   53</span>    verbose = user_default_params_D[<span class="stringliteral">&#39;process&#39;</span>][0][<span class="stringliteral">&#39;verbose&#39;</span>]</div>
<div class="line"><span class="lineno">   54</span>            </div>
<div class="line"><span class="lineno">   55</span>    <span class="keywordflow">if</span> verbose:</div>
<div class="line"><span class="lineno">   56</span>            </div>
<div class="line"><span class="lineno">   57</span>        Pprint_parameter(user_default_params_D)</div>
<div class="line"><span class="lineno">   58</span> </div>
<div class="line"><span class="lineno">   59</span>    project_FP = Get_project_path(<span class="stringliteral">&#39;notebook_FP&#39;</span>,user_default_params_D[<span class="stringliteral">&#39;project_path&#39;</span>])</div>
<div class="line"><span class="lineno">   60</span> </div>
<div class="line"><span class="lineno">   61</span>    <span class="keywordflow">if</span> project_FP:</div>
<div class="line"><span class="lineno">   62</span> </div>
<div class="line"><span class="lineno">   63</span>        process_file_FPN = path.join(project_FP,process_file)</div>
<div class="line"><span class="lineno">   64</span> </div>
<div class="line"><span class="lineno">   65</span>        <span class="keywordflow">if</span> path.exists(process_file_FPN):</div>
<div class="line"><span class="lineno">   66</span> </div>
<div class="line"><span class="lineno">   67</span>            <span class="keywordflow">if</span> verbose:</div>
<div class="line"><span class="lineno">   68</span>                </div>
<div class="line"><span class="lineno">   69</span>                <span class="keywordflow">print</span> (<span class="stringliteral">&#39;process file:\n    &#39;</span>,process_file_FPN, <span class="stringliteral">&#39;\n&#39;</span>)</div>
<div class="line"><span class="lineno">   70</span>                </div>
<div class="line"><span class="lineno">   71</span>            <span class="keywordflow">if</span> verbose &gt; 1:</div>
<div class="line"><span class="lineno">   72</span> </div>
<div class="line"><span class="lineno">   73</span>                process_D = Read_json(process_file_FPN)</div>
<div class="line"><span class="lineno">   74</span>                        </div>
<div class="line"><span class="lineno">   75</span>                Pprint_parameter( process_D ) </div>
<div class="line"><span class="lineno">   76</span> </div>
<div class="line"><span class="lineno">   77</span>        <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">   78</span> </div>
<div class="line"><span class="lineno">   79</span>            print(<span class="stringliteral">&#39;The process file does not exist:&#39;</span>, process_file_FPN)</div>
<div class="line"><span class="lineno">   80</span> </div>
<div class="line"><span class="lineno">   81</span>            <span class="keywordflow">return</span> <span class="keywordtype">None</span>, <span class="keywordtype">None</span></div>
<div class="line"><span class="lineno">   82</span> </div>
<div class="line"><span class="lineno">   83</span>    <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">   84</span> </div>
<div class="line"><span class="lineno">   85</span>        print(<span class="stringliteral">&#39;The project path does not exist:&#39;</span>, user_default_params_D[<span class="stringliteral">&#39;project_path&#39;</span>])</div>
<div class="line"><span class="lineno">   86</span> </div>
<div class="line"><span class="lineno">   87</span>        <span class="keywordflow">return</span> <span class="keywordtype">None</span>, <span class="keywordtype">None</span></div>
<div class="line"><span class="lineno">   88</span> </div>
<div class="line"><span class="lineno">   89</span>    <span class="keywordflow">if</span> process_file_FPN:</div>
<div class="line"><span class="lineno">   90</span> </div>
<div class="line"><span class="lineno">   91</span>        <span class="comment"># Read the process file to get the process parameters.</span></div>
<div class="line"><span class="lineno">   92</span>        process_D = Read_json(process_file_FPN)</div>
<div class="line"><span class="lineno">   93</span> </div>
<div class="line"><span class="lineno">   94</span>        <span class="keywordflow">if</span> <span class="keywordflow">not</span> process_D:</div>
<div class="line"><span class="lineno">   95</span> </div>
<div class="line"><span class="lineno">   96</span>            print(<span class="stringliteral">&#39;\n‚ùå The process file is empty or not a valid JSON:&#39;</span>, process_file_FPN)</div>
<div class="line"><span class="lineno">   97</span> </div>
<div class="line"><span class="lineno">   98</span>            <span class="keywordflow">return</span> <span class="keywordtype">None</span>, <span class="keywordtype">None</span></div>
<div class="line"><span class="lineno">   99</span> </div>
<div class="line"><span class="lineno">  100</span>        <span class="keywordflow">if</span> <span class="stringliteral">&quot;job_folder&quot;</span> <span class="keywordflow">in</span> process_D[<span class="stringliteral">&quot;process&quot;</span>]:</div>
<div class="line"><span class="lineno">  101</span> </div>
<div class="line"><span class="lineno">  102</span>            <span class="comment"># If the process file contains a job_folder, expand and read the pilot_file</span></div>
<div class="line"><span class="lineno">  103</span>            pilot_FPN = path.join(project_FP, process_D[<span class="stringliteral">&quot;process&quot;</span>][<span class="stringliteral">&quot;job_folder&quot;</span>], process_D[<span class="stringliteral">&quot;process&quot;</span>][<span class="stringliteral">&quot;pilot_file&quot;</span>])</div>
<div class="line"><span class="lineno">  104</span> </div>
<div class="line"><span class="lineno">  105</span>            json_path = path.join(project_FP, process_D[<span class="stringliteral">&quot;process&quot;</span>][<span class="stringliteral">&quot;job_folder&quot;</span>],process_D[<span class="stringliteral">&quot;process&quot;</span>][<span class="stringliteral">&quot;process_sub_folder&quot;</span>])</div>
<div class="line"><span class="lineno">  106</span> </div>
<div class="line"><span class="lineno">  107</span>            <span class="keywordflow">if</span> path.exists(pilot_FPN):</div>
<div class="line"><span class="lineno">  108</span> </div>
<div class="line"><span class="lineno">  109</span>                <span class="keywordflow">if</span> verbose:</div>
<div class="line"><span class="lineno">  110</span>                    </div>
<div class="line"><span class="lineno">  111</span>                    <span class="keywordflow">print</span> (<span class="stringliteral">&#39;pilot file:\n    &#39;</span>,pilot_FPN, <span class="stringliteral">&#39;\n&#39;</span>)</div>
<div class="line"><span class="lineno">  112</span> </div>
<div class="line"><span class="lineno">  113</span>            <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">  114</span> </div>
<div class="line"><span class="lineno">  115</span>                print(<span class="stringliteral">&#39;The pilot file does not exist:&#39;</span>, pilot_FPN)</div>
<div class="line"><span class="lineno">  116</span> </div>
<div class="line"><span class="lineno">  117</span>                pilot_FPN = <span class="keywordtype">None</span></div>
<div class="line"><span class="lineno">  118</span> </div>
<div class="line"><span class="lineno">  119</span>            <span class="comment"># Open and read the pilot text file linking to all json files defining the project</span></div>
<div class="line"><span class="lineno">  120</span>            <span class="keyword">with</span> open(pilot_FPN) <span class="keyword">as</span> f:</div>
<div class="line"><span class="lineno">  121</span> </div>
<div class="line"><span class="lineno">  122</span>                user_json_process_L = f.readlines()</div>
<div class="line"><span class="lineno">  123</span> </div>
<div class="line"><span class="lineno">  124</span>            <span class="comment"># Clean the list of json objects from comments and white space</span></div>
<div class="line"><span class="lineno">  125</span>            user_json_process_L = [path.join(json_path,x.strip())  <span class="keywordflow">for</span> x <span class="keywordflow">in</span> user_json_process_L <span class="keywordflow">if</span> len(x) &gt; 5 <span class="keywordflow">and</span> x[0] != <span class="stringliteral">&#39;#&#39;</span>]</div>
<div class="line"><span class="lineno">  126</span>               </div>
<div class="line"><span class="lineno">  127</span>        <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">  128</span> </div>
<div class="line"><span class="lineno">  129</span>            user_json_process_L = [path.join(project_FP, process_file_FPN)]</div>
<div class="line"><span class="lineno">  130</span>    </div>
<div class="line"><span class="lineno">  131</span>    <span class="keywordflow">if</span> verbose &gt; 1:</div>
<div class="line"><span class="lineno">  132</span> </div>
<div class="line"><span class="lineno">  133</span>        <span class="keywordflow">print</span> (<span class="stringliteral">&#39;Json process files:&#39;</span>)</div>
<div class="line"><span class="lineno">  134</span>                </div>
<div class="line"><span class="lineno">  135</span>        <span class="keywordflow">for</span> json_file <span class="keywordflow">in</span> user_json_process_L:</div>
<div class="line"><span class="lineno">  136</span>                </div>
<div class="line"><span class="lineno">  137</span>            <span class="keywordflow">print</span> (<span class="stringliteral">&#39;    &#39;</span>,json_file)</div>
<div class="line"><span class="lineno">  138</span> </div>
<div class="line"><span class="lineno">  139</span>    <span class="keywordflow">return</span> user_default_params_D, user_json_process_L</div>
</div><!-- fragment -->
</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<div id="page-nav" class="page-nav-panel">
<div id="page-nav-resize-handle"></div>
<div id="page-nav-tree">
<div id="page-nav-contents">
</div><!-- page-nav-contents -->
</div><!-- page-nav-tree -->
</div><!-- page-nav -->
</div><!-- container -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a href="../../d2/d51/namespaceprocess__project.html">process_project</a></li><li class="navelem"><a href="../../d8/d5a/namespaceprocess__project_1_1notebook__startup.html">notebook_startup</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.14.0 </li>
  </ul>
</div>
</body>
</html>
